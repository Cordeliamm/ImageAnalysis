
df['prompt_type'] = pd.Categorical(df['prompt_type'], categories=['Neutral', 'Counter', 'Inclusive'], ordered=True)

# Age distribution by prompt type 
plt.figure(figsize=(12, 7))
sns.violinplot(data=df, x='prompt_type', y='age', inner=None, palette='pastel')
sns.boxplot(data=df, x='prompt_type', y='age', width=0.1, showcaps=True, boxprops={'facecolor':'None'}, showfliers=False, whiskerprops={'linewidth':2})
plt.title("Age Distribution by Prompt Type")
plt.xlabel("Prompt Type")
plt.ylabel("Age")
plt.show()

# Age distribution 
plt.figure(figsize=(10, 6))
sns.histplot(df['age'].dropna(), bins=30, kde=True, color='skyblue')
plt.title("Overall Age Distribution")
plt.xlabel("Age")
plt.ylabel("Count")
plt.show()

# Gender distribution by prompt type
gender_counts = df.groupby(['prompt_type', 'gender']).size().reset_index(name='count')
total_counts = df.groupby('prompt_type').size().reset_index(name='total')
gender_counts = gender_counts.merge(total_counts, on='prompt_type')
gender_counts['percent'] = 100 * gender_counts['count'] / gender_counts['total']

plt.figure(figsize=(10, 6))
sns.barplot(data=gender_counts, x='prompt_type', y='percent', hue='gender', palette='Set2')
plt.title("Gender Distribution (%) by Prompt Type")
plt.ylabel("Percentage")
plt.xlabel("Prompt Type")
plt.legend(title='Gender')
plt.show()

# Race distribution by prompt type 
race_counts = df.groupby(['prompt_type', 'race']).size().reset_index(name='count')
total_counts = df.groupby('prompt_type').size().reset_index(name='total')
race_counts = race_counts.merge(total_counts, on='prompt_type')
race_counts['percent'] = 100 * race_counts['count'] / race_counts['total']

plt.figure(figsize=(12, 7))
sns.barplot(data=race_counts, x='prompt_type', y='percent', hue='race', palette='Set3')
plt.title("Race Distribution (%) by Prompt Type")
plt.ylabel("Percentage")
plt.xlabel("Prompt Type")
plt.legend(title='Race', bbox_to_anchor=(1.05, 1), loc='upper left')
plt.xticks(rotation=0)
plt.show()
